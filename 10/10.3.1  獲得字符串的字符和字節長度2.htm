<script language="javascript" type="text/javascript">

String.prototype.lengthB = function( )
{
    // 獲得並傳回指定字串的字節數，擴充String物件方法
    var b = 0, l = this.length;
    // 初始化字節數遞加變量，並獲得字串參數的字符個數
    if( l )
    {
        // 如果存在字串，則執行計算
        for( var i = 0; i < l; i ++ )
        {
            var c = this.charAt( i );
            // 獲得目前字符
            if ( escape( c ).length > 4 )
            {
                // 如果字符的逸出序列大於4位，說明是雙位元組                b += 2;
            }
            else if( c != "\r" )
            {
                b ++ ;
            }
        }

        return b;
        // 傳回位元組數    }
    else
    {
        return 0;
        // 如果參數為空，則傳回0個
    }
}


var s = "String物件長度";
// 定義字串直接量
alert(s.lengthB())	// 傳回14

</script>
